{"version":3,"sources":["utils.js","gui.js","index.js"],"names":["createNode","n","v","document","createElementNS","p","setAttributeNS","replace","m","o","s","toLowerCase","downloadContent","filename","content","blob","Blob","event","MouseEvent","window","a","createElement","download","href","URL","createObjectURL","dispatchEvent","emptyElement","element","firstChild","removeChild","getParameterByName","name","url","location","regex","RegExp","results","exec","undefined","decodeURIComponent","getQueryStringObject","search","substring","split","map","str","key","value","decodeURI","reduce","prev","curr","Object","assign","getQueryStringObjectFromHash","hash","serializeObject","obj","keys","k","join","controls","id","type","min","max","step","setAttributes","attributes","entries","forEach","val","setAttribute","elements","control","label","text","createTextNode","input","innerHTML","appendChild","addEventListener","target","options","Array","from","querySelectorAll","memo","item","getElementById","params","SIZE","CENTER","selectedColorScheme","tick","mouse","x","y","COLORS","canvas","context","getContext","width","height","imageData","getImageData","buffer","ArrayBuffer","data","length","bufferViewInt8","Uint8ClampedArray","bufferViewInt32","Uint32Array","levelBuffer","levelBufferViewInt8","isInsideCircle","x1","y1","x2","y2","r","Math","sqrt","rain","w","offsetWidth","style","index","isRain","isStreet","round","isUmbrella","random","moveDroplet","set","putImageData","src","nextLevel","rand","horizontalMovement","floor","verticalMovement","nextColor","render","requestAnimationFrame","Noise","track","audioContext","AudioContext","webkitAudioContext","createNoise","lastOut","bufferSize","sampleRate","noiseBuffer","createBuffer","output","getChannelData","i","white","audioSource","stopNoise","stop","buildTrack","createBufferSource","gainNode","createGain","connect","destination","setGain","volume","gain","setValueAtTime","currentTime","linearRampToValueAtTime","playNoise","loop","start","play","handleMousemove","handleRainChange","handleColorChange","parseInt","console","log","handleSoundChange","wind","rainRangeElement","soundRangeElement","colorRangeElement"],"mappings":";;AEAA;;AAQA;;ADRO,IAAM8D,QAAQ,GAAG,CAAC;AACrBC,EAAAA,EAAE,EAAE,MADiB;AAErBC,EAAAA,IAAI,EAAE,OAFe;AAGrBC,EAAAA,GAAG,EAAE,CAHgB;AAIrBC,EAAAA,GAAG,EAAE,GAJgB;AAKrBC,EAAAA,IAAI,EAAE,CALe;AAMrBnB,EAAAA,KAAK,EAAE;AANc,CAAD,EAOrB;AACCe,EAAAA,EAAE,EAAE,MADL;AAECC,EAAAA,IAAI,EAAE,OAFP;AAGCC,ACCJ,EDDIA,ECCEG,CDDC,EAAE,CAHN,SCIgB,GAAG,SAAhBA,aAAgB,CAACxC,OAAD,EAAUyC,UAAV;ADAlBH,ACAkB,AFXf,ECWHA,EDXSlE,CCWN,EAAE,ECAsCqD,CDJ5C,IDPoB,CEW8B,CAACiB,CFX5B,MEWqB,CAAeD,EFXjDrE,QEWkC,EAC1CuE,AFZqB,CAACtE,CAAD,EAAIC,CAAJ,EEWqB,AFXX,CEYvB;ADATiE,ACAS,AFXTlE,ECWAkE,ADXAlE,CAAC,GCWG,ADXAE,ECWE,CALP,KDNa,CAACC,eAAT,CAAyB,4BAAzB,EAAuDH,CAAvD,CAAJ;ACYA+C,ACDS,EDCTA,KAAK,CCDMD,CDCJ,ECDE;ADLV,ACKU,AFVT,CCFoB,EAcrB,IDZM,CEUWyB,GAAP,AFVAnE,CAAT,IAAcH,CAAd;ACaA6D,ADZI9D,ECYJ8D,EAAE,ADZE9D,CAAC,CCYD,ADZEK,OCWP,ODXK,CAAiB,IAAjB,EAAuBD,CAAC,CAACE,OAAF,CAAU,QAAV,EAAoB,UAAUC,CAAV,EAAaH,CAAb,EAAgBI,CAAhB,EAAmBC,CAAnB,EAAsB;ACarEsD,ACJS,AFRD,ECYRA,IAAI,EAAE,GCHFpC,EFTW,ECUhB,GCDY,CAAC6C,AFTSjE,CAAC,CAACG,UESnB,CAAqBoC,AFTJ,EAAb,CESJ,EAA0ByB,GAA1B,CADK;ADKTP,ACLS,AFPJ,ECYLA,CCN2C,CAAzB,CDMf,ADdwB,CAAvB,CCcC,CAHN,ADTS/D,CAAC,CAACG,CAAD,CAFL;ACeJ6D,ACPkB,AFTlB,CESJ,CDOIA,GAAG,EAAE,CAJN;AAKCC,EAAAA,IAAI,EAAE,CALP;AAMCnB,ACLJ,AFTI,ECcAA,ECLE0B,GDKG,EAAE,ADdAzE,CAAP,EESU,GAAG6D,cAASjB,GAAT,CAAa,UAAA8B,OAAO,EAAI;ADDtC,ACEC,AFTH,CCPuB,ADAjB,ECqBJ,GCLOC,KAAK,GAAGzE,QAAQ,CAACkB,aAAT,CAAuB,OAAvB,CAAd;ADMA0C,ACLA,EDKAA,EAAE,EAAE,ACLEc,IAAI,GDIX,ACJc1E,QAAQ,CAAC2E,cAAT,CAAwBH,OAAO,CAACZ,EAAhC,CAAb;ADMAC,ACLA,EDKAA,IAAI,ACLEe,EDKA,GCLK,GAAG5E,CDGf,OCHuB,CAACkB,aAAT,CAAuB,OAAvB,CAAd;ADMA4C,ACJAG,EDIAH,ACJAG,GDIG,EAAE,CAHN,OCDc,CAACW,KAAD,EAAQJ,OAAR,CAAb;ADKAT,ACHA,AFbG,ECgBHA,EDhBStD,CCgBN,CCHG4D,CDGD,CAJN,CCCU,GAAGrE,OFbY,CEaJ,CAACkB,CFbM,SAAlBT,GEaG,CAAuB,MAAvB,CAAZ,IFb2B,CAACC,QAAD,EAAWC,OAAX,EAAuB;ACiBlDqD,ACHAK,AFbA,ECgBAL,ACHAK,GAAG,CDGC,ACHAQ,AFbEjE,ECgBA,CALP,CDXW,GAAG,EEab,EFbiBC,IAAJ,CAAS,CAACF,OEaF6D,AFbC,CAAT,CAAb,KEa4B,CAAC3B,KAA7B;ADIAA,ACFA4B,AFdA,ECgBA5B,ACFA4B,IFdM3D,CCgBD,ACFA,CAACgE,CDEC,EDhBI,GAAG,IAAI/D,CEclB,CAAkB2D,IAAlB,IFdc,CAAe,OAAf,EAAwB;ACUvC,ACKCD,AFdI,CCZgB,CAAjB,AC0BHA,KAAK,CAACK,IFdM9D,MAD0B,CEetC,CAAkBqD,GAAlB;AACAI,AFdI,EEcJA,KAAK,CAACK,OFdS,IEcf,AFhBsC,CEgBpBF,KAAlB;AAEAA,AFfI,EEeJA,KAAK,CAACG,UFfY,MEelB,CAAuB,QAAvB,EAAiC,UAAAjE,KAAK,EAAI;AACtCuD,AFnBkC,GAAxB,CEmBVA,AFnBJ,GEmBO,CAACQ,SAAJ,eAAqB/D,KAAK,CAACkE,MAAN,CAAanC,KAAlC;AACA,AFfJ,MAAM5B,CAAC,CEeGgE,EFfAjF,KEeO,GAAGkF,AFfF,CAAChE,IEeM,CAACiE,IAAN,CAAWnF,GFfrB,CAAuB,GAAvB,CEe6B,AFfvC,CEewCoF,gBAAT,CAA0B,OAA1B,CAAX,EACX1C,GADW,CACP;AAAA,AFfbzB,EAAAA,CAAC,CAACE,MEeayC,EAAF,AFfb,GAAalD,MEeEkD,EAAF,AFfb;AEea,AFdb3C,EAAAA,CAAC,CAACG,IAAF,EEcmByB,CFdVxB,GAAG,CEcC,AFdAC,SEcMuB,KAAN,CFdJ,CAAoBjC,IAApB,CAAT;AEca,AFbbK,EAAAA,CAAC,CAACM,aAAF,CAAgBT,KAAhB,UEaiC8C,EAApB,EAAyBf,KAAzB;AAAA,AFZhB,CAXM,IEsBiB,EAEXE,MAFW,CAEJ,UAACsC,IAAD,EAAOC,IAAP;AAAA,aAAgBpC,MAAM,CAACC,MAAP,CAAckC,IAAd,EAAoBC,IAApB,CAAhB;AAAA,KAFI,EAEuC,EAFvC,CAAhB;AAGAvD,IAAAA,QAAQ,CAACsB,IAAT,GAAgB,4BAAgB4B,OAAhB,CAAhB;AACH,AFbE,GEOH,CFPSzD,YAAY,GAAG,SAAfA,YAAe,CAAAC,OAAO,EAAI;AEenC,AFdA,SEcOgD,AFdAhD,KEcP,EFdc,CAACC,UAAf,EAA2B;AEe9B,AFdOD,CETS,CAAjB,EFSQA,OAAO,CAACE,WAAR,CAAoBF,OAAO,CAACC,UAA5B;AACH;AEeL,IAAMsD,MAAM,GAAGhF,QAAQ,CAACuF,cAAT,CAAwB,UAAxB,CAAf;AACAhB,AFfI,QEeI,CAACH,AFfE3C,OEeX,AFfI,CEea,UAAAA,OAAO;AAAA,AFdvB,CALM,QEmBqBuD,MAAM,CAACF,WAAP,CAAmBrD,OAAnB,CAAJ;AAAA,CAAxB,GAEA;;AACA,IAAM+D,MAAM,GAAG,0CAAf;AACAtC,AFhBO,IAAMtB,EEgBP,CAAC4B,IAAP,CAAYgC,MAAZ,EAAoBpB,EFhBW,GAAG,EEgBlC,CAA4B,MFhBfxC,IEgBegB,GAAG,EAAI,SFhBD,CAACf,IAAD,EAAOC,GAAP,EAAe;AEiB7C,AFhBA,MEgBM8C,AFhBF,CAAC9C,GAAL,CEgBW,CFhBD,EEgBI9B,QAAQ,CAACuF,cAAT,CAAwB3C,GAAxB,CAAd;AFfId,IAAAA,GAAG,GAAGd,MAAM,CAACe,QAAP,CAAgBX,IAAtB;AEgBJ,AFfC,MEeGwD,KAAJ,EAAW;AACPA,IAAAA,KAAK,CAAC/B,KAAN,GAAc2C,MAAM,CAAC5C,GAAD,CAApB;AACH,AFhBDf,EAAAA,IAAI,GAAGA,IAAI,CAACzB,OAAL,CAAa,SAAb,EAAwB,MAAxB,CAAP;AEiBH,AFhBG,CEWJ,KFXQ4B,KAAK,GAAG,IAAIC,MAAJ,CAAW,SAASJ,IAAT,GAAgB,mBAA3B,CAAZ;AEkBJ,AFlBI,MACIK,OAAO,GAAGF,KAAK,CAACG,IAAN,CAAWL,GAAX,CADd;AAEA,MAAI,CAACI,OAAL,EAAc,OAAOE,SAAP;AACd,MAAI,CAACF,OAAO,CAAC,CAAD,CAAZ,EAAiB,OAAO,EAAP;AACjB,SAAOG,kBAAkB,CAACH,OAAO,CAAC,CAAD,CAAP,CAAW9B,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAAzB;AACH,CAVM;;;;AAYA,IAAMkC,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AACtC,SAAOtB,MAAM,CAACe,QAAP,CAAgBQ,MAAhB,CAAuBC,SAAvB,CAAiC,CAAjC,EAAoCC,KAApC,CAA0C,GAA1C,EACFC,GADE,CACE,UAAAC,GAAG,EAAI;AAAA,qBACWA,GAAG,CAACF,KAAJ,CAAU,GAAV,CADX;AAAA;AAAA,QACHG,GADG;AAAA,QACEC,KADF;;AAER,+BAASD,GAAT,EAAeE,SAAS,CAACD,KAAD,CAAxB;AACH,GAJE,EAKFE,MALE,CAKK,UAACC,IAAD,EAAOC,IAAP;AAAA,WAAgBC,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoBC,IAApB,CAAhB;AAAA,GALL,CAAP;AAMH,CAPM;;;;AASA,IAAMG,4BAA4B,GAAG,SAA/BA,4BAA+B,GAAM;AAC9C,SAAOpC,MAAM,CAACe,QAAP,CAAgBsB,IAAhB,CAAqBb,SAArB,CAA+B,CAA/B,EAAkCC,KAAlC,CAAwC,GAAxC,EACFC,GADE,CACE,UAAAC,GAAG,EAAI;AAAA,sBACWA,GAAG,CAACF,KAAJ,CAAU,GAAV,CADX;AAAA;AAAA,QACHG,GADG;AAAA,QACEC,KADF;;AAER,+BAASD,GAAT,EAAeE,SAAS,CAACD,KAAD,CAAxB;AACH,GAJE,EAKFE,MALE,CAKK,UAACC,IAAD,EAAOC,IAAP;AAAA,WAAgBC,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoBC,IAApB,CAAhB;AAAA,GALL,CAAP;AAMH,CAPM;;;;AAUA,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,GAAG;AAAA,oBAAQL,MAAM,CAACM,IAAP,CAAYD,GAAZ,EAAiBb,GAAjB,CAAqB,UAAAe,CAAC;AAAA,qBAAKA,CAAL,cAAUF,GAAG,CAACE,CAAD,CAAb;AAAA,GAAtB,EAA0CC,IAA1C,CAA+C,GAA/C,CAAR;AAAA,CAA3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEmHP,IAAM+B,IAAI,GAAG,GAAb;AACA,IAAMC,MAAM,GAAGD,IAAI,GAAG,CAAtB;AAEA,IAAIE,mBAAmB,GAAG,CAA1B;AACA,IAAIC,IAAI,GAAG,CAAX;AACA,IAAIC,KAAK,GAAG;AACRC,EAAAA,CAAC,EAAE,GADK;AAERC,EAAAA,CAAC,EAAE;AAFK,CAAZ,EAKA;;AACA,IAAMC,MAAM,GAAG,CAAC,CACZ,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADY,EAEZ,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFY,EAGZ,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHY,EAIZ,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAJY,EAKZ,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CALY,EAMZ,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CANY,EAOZ,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAPY,EAQZ,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CARY,EASZ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CATY,CAAD,EAUZ,CACC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADD,EAEC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFD,EAGC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHD,EAIC,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX,CAJD,EAKC,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX,CALD,EAMC,CAAC,GAAD,EAAM,EAAN,EAAU,EAAV,CAND,EAOC,CAAC,GAAD,EAAM,EAAN,EAAU,EAAV,CAPD,EAQC,CAAC,GAAD,EAAM,CAAN,EAAS,EAAT,CARD,EASC,CAAC,GAAD,EAAM,CAAN,EAAS,EAAT,CATD,CAVY,EAoBZ,CACC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADD,EAEC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFD,EAGC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHD,EAIC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAJD,EAKC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CALD,EAMC,CAAC,EAAD,EAAK,GAAL,EAAU,GAAV,CAND,EAOC,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT,CAPD,EAQC,CAAC,CAAD,EAAI,EAAJ,EAAQ,GAAR,CARD,EASC,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CATD,CApBY,CAAf,EAiCA;;AACA,IAAMC,MAAM,GAAGjG,QAAQ,CAACuF,cAAT,CAAwB,QAAxB,CAAf;AACA,IAAMW,OAAO,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAhB;AAEAF,MAAM,CAACG,KAAP,GAAeX,IAAf;AACAQ,MAAM,CAACI,MAAP,GAAgBZ,IAAhB;AAEA,IAAMa,SAAS,GAAGJ,OAAO,CAACK,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAA2Bd,IAA3B,EAAiCA,IAAjC,CAAlB,EAEA;;AACA,IAAMe,MAAM,GAAG,IAAIC,WAAJ,CAAgBH,SAAS,CAACI,IAAV,CAAeC,MAA/B,CAAf;AACA,IAAMC,cAAc,GAAG,IAAIC,iBAAJ,CAAsBL,MAAtB,CAAvB;AACA,IAAMM,eAAe,GAAG,IAAIC,WAAJ,CAAgBP,MAAhB,CAAxB,EAEA;;AACA,IAAMQ,WAAW,GAAG,IAAIP,WAAJ,CAAgBH,SAAS,CAACI,IAAV,CAAeC,MAA/B,CAApB;AACA,IAAMM,mBAAmB,GAAG,IAAIJ,iBAAJ,CAAsBG,WAAtB,CAA5B,EAEA;;AACA,SAASE,cAAT,CAAwBC,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC,EAAoCC,EAApC,EAAwCC,CAAxC,EAA2C;AACvC,SAAOC,IAAI,CAACC,IAAL,CAAU,CAACN,EAAE,GAAGE,EAAN,KAAaF,EAAE,GAAGE,EAAlB,IAAwB,CAACD,EAAE,GAAGE,EAAN,KAAaF,EAAE,GAAGE,EAAlB,CAAlC,IAA2DC,CAAlE;AACH;;AAED,SAASG,IAAT,CAAc9B,IAAd,EAAoB;AAEhB,MAAM+B,CAAC,GAAG1B,MAAM,CAAC2B,WAAjB;AACA3B,EAAAA,MAAM,CAAC4B,KAAP,CAAaxB,MAAb,GAAsBsB,CAAtB;;AAEA,OAAK,IAAI5B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,IAApB,EAA0BM,CAAC,IAAKH,IAAI,GAAG,CAAR,GAAa,CAA5C,EAA+C;AAC3C,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,IAApB,EAA0BK,CAAC,IAAKF,IAAI,GAAG,CAAR,GAAa,CAA5C,EAA+C;AAE3C,UAAMkC,KAAK,GAAI/B,CAAD,GAAMN,IAAN,GAAaK,CAA3B,CAF2C,CAI3C;;AACA,UAAMiC,MAAM,GAAGhC,CAAC,GAAG,CAAnB,CAL2C,CAO3C;;AACA,UAAMiC,QAAQ,GAAGjC,CAAC,GAAGyB,IAAI,CAACS,KAAL,CAAWvC,MAAM,GAAG,IAApB,CAAJ,IAAiCK,CAAC,GAAGyB,IAAI,CAACS,KAAL,CAAWvC,MAAM,GAAG,IAApB,CAAtD,CAR2C,CAU3C;;AACA,UAAMwC,UAAU,GAAGV,IAAI,CAACW,MAAL,KAAgB,GAAhB,IACZjB,cAAc,CAACxB,MAAD,EAASA,MAAT,EAAiBI,CAAjB,EAAoBC,CAApB,EAAuB,EAAvB,CADF,IAEZ,CAACmB,cAAc,CAACxB,MAAD,EAASA,MAAM,GAAG,EAAlB,EAAsBI,CAAC,GAAG,CAA1B,EAA6BC,CAA7B,EAAgC,EAAhC,CAFtB;;AAIA,UAAIgC,MAAM,IAAIC,QAAV,IAAsBE,UAA1B,EAAsC;AAClCjB,QAAAA,mBAAmB,CAACa,KAAD,CAAnB,GAA6B,CAA7B;AACH,OAjB0C,CAmB3C;;;AACAM,MAAAA,WAAW,CAACN,KAAD,CAAX;AACH;AACJ,GA5Be,CA8BhB;;;AACAxB,EAAAA,SAAS,CAACI,IAAV,CAAe2B,GAAf,CAAmBzB,cAAnB;AACAV,EAAAA,OAAO,CAACoC,YAAR,CAAqBhC,SAArB,EAAgC,CAAhC,EAAmC,CAAnC;AACH;;AAED,SAAS8B,WAAT,CAAqBG,GAArB,EAA0B;AAEtB,MAAMC,SAAS,GAAGvB,mBAAmB,CAACsB,GAAD,CAAnB,GAA2Bf,IAAI,CAACS,KAAL,CAAWT,IAAI,CAACW,MAAL,KAAgB,GAA3B,CAA7C,CAFsB,CAItB;;AACA,MAAMM,IAAI,GAAGjB,IAAI,CAACS,KAAL,CAAWT,IAAI,CAACW,MAAL,KAAgB,GAA3B,CAAb,CALsB,CAOtB;;AACA,MAAMO,kBAAkB,GAAGlB,IAAI,CAACW,MAAL,KAAgB,GAAhB,GACrBI,GAAG,GAAGE,IAAN,GAAajB,IAAI,CAACmB,KAAL,CAAY9C,KAAK,CAACC,CAAN,GAAU,CAAV,GAAc,CAA1B,CADQ,GAErByC,GAFN,CARsB,CAYtB;AACA;;AACA,MAAMK,gBAAgB,GAAGpB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACW,MAAL,MAAiB,IAAIX,IAAI,CAACmB,KAAL,CAAY9C,KAAK,CAACE,CAAN,GAAU,CAAtB,CAArB,CAAX,KAA+DyB,IAAI,CAACW,MAAL,KAAgB,GAAhB,GAClF,CADkF,GAElF,CAAC,CAFkB,CAAzB;AAIAlB,EAAAA,mBAAmB,CAACyB,kBAAkB,GAAIjD,IAAI,GAAGmD,gBAA9B,CAAnB,GAAsEJ,SAAS,IAAIC,IAAI,GAAG,CAAX,CAA/E;AAEA,MAAMI,SAAS,GAAG7C,MAAM,CAACL,mBAAD,CAAN,CAA4B6C,SAA5B,KAA0C,EAA5D,CApBsB,CAsBtB;;AACA1B,EAAAA,eAAe,CAACyB,GAAG,GAAG9C,IAAP,CAAf,GACK,OAAO,EAAR,GAAwB;AACvBoD,EAAAA,SAAS,CAAC,CAAD,CAAT,IAAgB,EADjB,GACwB;AACvBA,EAAAA,SAAS,CAAC,CAAD,CAAT,IAAgB,CAFjB,GAEwB;AACxBA,EAAAA,SAAS,CAAC,CAAD,CAJb,CAvBsB,CA2BM;AAC/B;;AAED,SAASC,MAAT,GAAkB;AACdpB,EAAAA,IAAI,CAAC9B,IAAI,EAAL,CAAJ,CADc,CAGd;AACA;;AACAmD,EAAAA,qBAAqB,CAAC;AAAA,WAAMD,MAAM,EAAZ;AAAA,GAAD,CAArB,CALc,CAMd;AACH,EAED;;;AACAA,MAAM;;AAGN,IAAME,KAAK,GAAI,YAAY;AAEvB,MAAMC,KAAK,GAAG,EAAd;AACA,MAAMC,YAAY,GAAG,KAAKlI,MAAM,CAACmI,YAAP,IAAuBnI,MAAM,CAACoI,kBAAnC,GAArB;;AAEA,WAASC,WAAT,CAAqBJ,KAArB,EAA4B;AACxB,QAAIK,OAAO,GAAG,GAAd;AACA,QAAMC,UAAU,GAAG,IAAIL,YAAY,CAACM,UAApC;AACA,QAAMC,WAAW,GAAGP,YAAY,CAACQ,YAAb,CAA0B,CAA1B,EAA6BH,UAA7B,EAAyCL,YAAY,CAACM,UAAtD,CAApB;AACA,QAAMG,MAAM,GAAGF,WAAW,CAACG,cAAZ,CAA2B,CAA3B,CAAf;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,UAApB,EAAgCM,CAAC,EAAjC,EAAqC;AACjC,UAAIC,KAAK,GAAGtC,IAAI,CAACW,MAAL,KAAgB,CAAhB,GAAoB,CAAhC;AACAwB,MAAAA,MAAM,CAACE,CAAD,CAAN,GAAY,CAACP,OAAO,GAAI,OAAOQ,KAAnB,IAA6B,IAAzC;AACAR,MAAAA,OAAO,GAAGK,MAAM,CAACE,CAAD,CAAhB;AACAF,MAAAA,MAAM,CAACE,CAAD,CAAN,IAAa,GAAb;AACH;;AAEDZ,IAAAA,KAAK,CAACc,WAAN,CAAkBvD,MAAlB,GAA2BiD,WAA3B;AACH;;AAED,WAASO,SAAT,GAAqB;AACjB,QAAIf,KAAK,CAACc,WAAV,EAAuB;AACnBd,MAAAA,KAAK,CAACc,WAAN,CAAkBE,IAAlB;AACH;AACJ;;AAGD,WAASC,UAAT,CAAoBjB,KAApB,EAA2B;AACvBA,IAAAA,KAAK,CAACc,WAAN,GAAoBb,YAAY,CAACiB,kBAAb,EAApB;AACAlB,IAAAA,KAAK,CAACmB,QAAN,GAAiBlB,YAAY,CAACmB,UAAb,EAAjB;AACApB,IAAAA,KAAK,CAACc,WAAN,CAAkBO,OAAlB,CAA0BrB,KAAK,CAACmB,QAAhC;AACAnB,IAAAA,KAAK,CAACmB,QAAN,CAAeE,OAAf,CAAuBpB,YAAY,CAACqB,WAApC;AACH;;AAED,WAASC,OAAT,CAAiBvB,KAAjB,EAAwB;AACpBA,IAAAA,KAAK,CAACwB,MAAN,GAAe,GAAf;AACAxB,IAAAA,KAAK,CAACmB,QAAN,CAAeM,IAAf,CAAoBC,cAApB,CAAmC,CAAnC,EAAsCzB,YAAY,CAAC0B,WAAnD;AACA3B,IAAAA,KAAK,CAACmB,QAAN,CAAeM,IAAf,CAAoBG,uBAApB,CAA4C5B,KAAK,CAACwB,MAAN,GAAe,CAA3D,EAA8DvB,YAAY,CAAC0B,WAAb,GAA2B,CAAzF;AACA3B,IAAAA,KAAK,CAACmB,QAAN,CAAeM,IAAf,CAAoBG,uBAApB,CAA4C5B,KAAK,CAACwB,MAAlD,EAA0DvB,YAAY,CAAC0B,WAAvE;AAEH;;AAED,WAASE,SAAT,GAAqB;AACjBd,IAAAA,SAAS,CAACf,KAAD,CAAT;AACAiB,IAAAA,UAAU,CAACjB,KAAD,CAAV;AACAI,IAAAA,WAAW,CAACJ,KAAD,CAAX;AACAuB,IAAAA,OAAO,CAACvB,KAAD,CAAP;AACAA,IAAAA,KAAK,CAACc,WAAN,CAAkBgB,IAAlB,GAAyB,IAAzB;AACA9B,IAAAA,KAAK,CAACc,WAAN,CAAkBiB,KAAlB;AACH,GAlDsB,CAoDvB;;;AACA,SAAO;AACHC,IAAAA,IAAI,EAAEH,SADH;AAEHb,IAAAA,IAAI,EAAED;AAFH,GAAP;AAKH,CA1Dc,EAAf;;AA6DA,IAAIkB,eAAe,GAAG,SAAlBA,eAAkB,CAACpK,KAAD,EAAW;AAAA,MACtBkE,MADsB,GACZlE,KADY,CACtBkE,MADsB;AAE7Ba,EAAAA,KAAK,CAACC,CAAN,GAAUd,MAAM,CAACnC,KAAP,GAAe,GAAzB;AACH,CAHD;;AAKA,IAAMsI,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACrK,KAAD,EAAW;AAAA,MACzBkE,MADyB,GACflE,KADe,CACzBkE,MADyB;AAEhCa,EAAAA,KAAK,CAACE,CAAN,GAAUf,MAAM,CAACnC,KAAP,GAAe,GAAzB;AACH,CAHD;;AAKA,IAAMuI,iBAAiB,GAAG,SAApBA,iBAAoB,CAACtK,KAAD,EAAW;AAAA,MAC1BkE,MAD0B,GAChBlE,KADgB,CAC1BkE,MAD0B;AAEjCW,EAAAA,mBAAmB,GAAG0F,QAAQ,CAACrG,MAAM,CAACnC,KAAR,CAA9B;AACAyI,EAAAA,OAAO,CAACC,GAAR,CAAY5F,mBAAZ;AACH,CAJD;;AAMA,IAAM6F,iBAAiB,GAAG,SAApBA,iBAAoB,CAAC1K,KAAD,EAAW;AAAA,MAC1BkE,MAD0B,GAChBlE,KADgB,CAC1BkE,MAD0B;;AAEjC,MAAIA,MAAM,CAACnC,KAAP,KAAiB,GAArB,EAA0B;AACtBmG,IAAAA,KAAK,CAACiC,IAAN;AACH,GAFD,MAEO;AACHjC,IAAAA,KAAK,CAACiB,IAAN;AACH;AACJ,CAPD;;AAUA,IAAMwB,IAAI,GAAGzL,QAAQ,CAACuF,cAAT,CAAwB,MAAxB,CAAb;AACAkG,IAAI,CAAC1G,gBAAL,CAAsB,OAAtB,EAA+BmG,eAA/B;AAEA,IAAMQ,gBAAgB,GAAG1L,QAAQ,CAACuF,cAAT,CAAwB,MAAxB,CAAzB;AACAmG,gBAAgB,CAAC3G,gBAAjB,CAAkC,OAAlC,EAA2CoG,gBAA3C;AAGA,IAAMQ,iBAAiB,GAAG3L,QAAQ,CAACuF,cAAT,CAAwB,OAAxB,CAA1B;AACAoG,iBAAiB,CAAC5G,gBAAlB,CAAmC,OAAnC,EAA4CyG,iBAA5C;AAEA,IAAMI,iBAAiB,GAAG5L,QAAQ,CAACuF,cAAT,CAAwB,OAAxB,CAA1B;AACAqG,iBAAiB,CAAC7G,gBAAlB,CAAmC,OAAnC,EAA4CqG,iBAA5C","file":"bitfire.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export const createNode = (n, v) => {\n    n = document.createElementNS(\"http://www.w3.org/2000/svg\", n);\n    for (var p in v)\n        n.setAttributeNS(null, p.replace(/[A-Z]/g, function (m, p, o, s) {\n            return \"-\" + m.toLowerCase();\n        }), v[p]);\n    return n\n};\n\nexport const downloadContent = (filename, content) => {\n    const blob = new Blob([content]);\n    const event = new MouseEvent('click', {\n        'view': window,\n        'bubbles': true,\n        'cancelable': true\n    });\n    const a = document.createElement(\"a\");\n    a.download = filename;\n    a.href = URL.createObjectURL(blob);\n    a.dispatchEvent(event);\n};\n\nexport const emptyElement = element => {\n    while (element.firstChild) {\n        element.removeChild(element.firstChild);\n    }\n    return element;\n};\n\nexport const getParameterByName = (name, url) => {\n    if (!url) {\n        url = window.location.href;\n    }\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return undefined;\n    if (!results[2]) return \"\";\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n};\n\nexport const getQueryStringObject = () => {\n    return window.location.search.substring(1).split('&')\n        .map(str => {\n            let [key, value] = str.split('=');\n            return {[key]: decodeURI(value)};\n        })\n        .reduce((prev, curr) => Object.assign(prev, curr));\n};\n\nexport const getQueryStringObjectFromHash = () => {\n    return window.location.hash.substring(1).split('&')\n        .map(str => {\n            let [key, value] = str.split('=');\n            return {[key]: decodeURI(value)};\n        })\n        .reduce((prev, curr) => Object.assign(prev, curr));\n};\n\n\nexport const serializeObject = obj => `#${Object.keys(obj).map(k=>`${k}=${obj[k]}`).join('&')}`;\n","export const controls = [{\n    id: 'wind',\n    type: 'range',\n    min: 0,\n    max: 100,\n    step: 1,\n    value: 50\n}, {\n    id: 'rain',\n    type: 'range',\n    min: 0,\n    max: 100,\n    step: 1,\n    value: 50\n}, {\n    id: 'sound',\n    type: 'range',\n    min: 0,\n    max: 1,\n    step: 1,\n    value: 0\n}, {\n    id: 'color',\n    type: 'range',\n    min: 0,\n    max: 2,\n    step: 1,\n    value: 0\n}];","import {\n    createNode,\n    downloadContent,\n    emptyElement,\n    getQueryStringObjectFromHash,\n    serializeObject\n} from './utils.js';\n\nimport {controls} from \"./gui.js\";\n\n\nconst setAttributes = (element, attributes) => Object.entries(attributes)\n    .forEach(([key, val]) =>\n        element.setAttribute(key, val));\n\nconst elements = controls.map(control => {\n    const label = document.createElement('label');\n    const text = document.createTextNode(control.id);\n    const input = document.createElement('input');\n\n    setAttributes(input, control);\n\n    const val = document.createElement('span');\n    val.innerHTML = ` (${control.value})`;\n\n    label.appendChild(text);\n    label.appendChild(val);\n    label.appendChild(input);\n\n    input.addEventListener('change', event => {\n        val.innerHTML = ` (${event.target.value})`;\n        const options = Array.from(document.querySelectorAll('input'))\n            .map(({id, value}) => ({[id]: value}))\n            .reduce((memo, item) => Object.assign(memo, item), {});\n        location.hash = serializeObject(options);\n    });\n\n    return label;\n});\n\nconst target = document.getElementById('controls');\nelements.forEach(element => target.appendChild(element));\n\n// const search = window.location.search;\nconst params = getQueryStringObjectFromHash();\nObject.keys(params).forEach(key => {\n    const input = document.getElementById(key);\n    if (input) {\n        input.value = params[key];\n    }\n});\n\n/*\n\n\n\n\n\nconst svg = createNode(\"svg\");\ndocument.getElementById('js-paper').appendChild(svg);\n\nwindow.addEventListener(\"hashchange\", event => {\n  const options = getQueryStringObjectFromHash();\n  render({svg, ...options});\n  Object.keys(options).forEach(key => {\n    const input = document.getElementById(key);\n    if (input) {\n      input.value = options[key];\n    }\n  });\n});\n\nconst options = Array.from(document.querySelectorAll('input'))\n    .map(({id, value}) => ({[id]: value}))\n    .reduce((memo, item) => Object.assign(memo, item), {});\nrender({svg, ...options});\n\n\nconst downloadButton = document.createElement('button');\ndownloadButton.innerText = \"Download SVG\";\ndownloadButton.addEventListener('click', event => {\n  const options = Array.from(document.querySelectorAll('input'))\n      .map(({id, value}) => ({[id]: value}))\n      .reduce((memo, item) => Object.assign(memo, item), {});\n  render({svg, ...options});\n  const values = Object.values(options).join('-');\n  downloadContent(`mandala-${values}.svg`, svg.outerHTML);\n});\ntarget.appendChild(downloadButton);\n\nfunction render(options) {\n\n  const {svg} = options;\n\n  const size = 540;\n  const table = parseInt(options.table);\n  const modulo = parseInt(options.modulo);\n  const rotation = parseInt(options.rotation);\n  const start = parseInt((options.start || 0) / 100 * modulo);\n  const end = parseInt((options.end || 100) / 100 * modulo);\n\n  const width = size;\n  const height = size;\n\n  emptyElement(svg);\n  svg.setAttribute(\"viewBox\", `0, 0, ${size}, ${size}`);\n  svg.setAttribute('width', width);\n  svg.setAttribute('height', height);\n\n\n  // Create an array of circle coordinates.\n  const circle = new Array(modulo).fill(0).map((_, index) => index * (Math.PI * 2) / modulo).map(angle => {\n    const x = width / 2 * Math.cos(angle + (Math.PI / 180 * rotation)) + width / 2;\n    const y = height / 2 * Math.sin(angle + (Math.PI / 180 * rotation)) + height / 2;\n    return {x, y};\n  });\n\n  // Create the lines.\n  const lines = new Array(end - start).fill(0).map((_, index) => start + index).map(i => {\n    const p1 = parseInt(i % modulo, 10);\n    const p2 = parseInt((table * i) % modulo, 10);\n\n    const start = circle[p1];\n    const end = circle[p2];\n\n    const {x: x1, y: y1} = start;\n    const {x: x2, y: y2} = end;\n\n    if (options.center === \"1\") {\n      const w = Math.abs(x1 - x2);\n      const h = Math.abs(y1 - y2);\n\n      const x = x1 < x2 ? x1 : x2;\n      const y = y1 < y2 ? y1 : y2;\n      const diffx = size / 2 - x;\n      const diffy = size / 2 - y;\n\n      const res = {\n        x1: x1 + diffx - w / 2,\n        x2: x2 + diffx - w / 2,\n        y1: y1 + diffy - h / 2,\n        y2: y2 + diffy - h / 2\n      };\n\n      return res;\n    }\n\n    return {x1, y1, x2, y2};\n  });\n\n  const filteredLines = lines.filter((_, index) => {\n    return index % parseInt(options.keepEveryNLines) === parseInt(options.keepEveryNLinesShift);\n  });\n\n  const filteredLines2 = parseInt(options.minLength) === 0 ? filteredLines : filteredLines.filter(line => {\n    const a = line.x1 - line.x2;\n    const b = line.y1 - line.y2;\n    const length = Math.sqrt(a * a + b * b);\n    return length > options.minLength\n  });\n\n\n  // Append lines to svg element.\n  filteredLines2.forEach(coordinates => {\n    const line = createNode(\"line\", {\n      strokeWidth: 0.4,\n      stroke: \"#FFFFFF\", ...coordinates\n    });\n    svg.appendChild(line);\n  });\n\n}\n\n* */\n\nconst SIZE = 256;\nconst CENTER = SIZE / 2;\n\nlet selectedColorScheme = 0;\nlet tick = 0;\nlet mouse = {\n    x: 0.5,\n    y: 0.4\n};\n\n// A gray-scale height-map.\nconst COLORS = [[\n    [255, 255, 255],\n    [240, 240, 240],\n    [217, 217, 217],\n    [189, 189, 189],\n    [150, 150, 150],\n    [115, 115, 115],\n    [82, 82, 82],\n    [37, 37, 37],\n    [0, 0, 0]\n], [\n    [255, 255, 204],\n    [255, 237, 160],\n    [254, 217, 118],\n    [254, 178, 76],\n    [253, 141, 60],\n    [252, 78, 42],\n    [227, 26, 28],\n    [189, 0, 38],\n    [128, 0, 38]\n], [\n    [255, 247, 251],\n    [236, 231, 242],\n    [208, 209, 230],\n    [166, 189, 219],\n    [116, 169, 207],\n    [54, 144, 192],\n    [5, 112, 176],\n    [4, 90, 141],\n    [2, 56, 88]\n]];\n\n\n// Setup the canvas.\nconst canvas = document.getElementById('canvas');\nconst context = canvas.getContext('2d');\n\ncanvas.width = SIZE;\ncanvas.height = SIZE;\n\nconst imageData = context.getImageData(0, 0, SIZE, SIZE);\n\n// One buffer to hold the color data for each pixel.\nconst buffer = new ArrayBuffer(imageData.data.length);\nconst bufferViewInt8 = new Uint8ClampedArray(buffer);\nconst bufferViewInt32 = new Uint32Array(buffer);\n\n// One buffer to hold the height map level for each pixel.\nconst levelBuffer = new ArrayBuffer(imageData.data.length);\nconst levelBufferViewInt8 = new Uint8ClampedArray(levelBuffer);\n\n// Check if a coordinate is inside a circle with center x1, y1 and radius r.\nfunction isInsideCircle(x1, y1, x2, y2, r) {\n    return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2)) < r\n}\n\nfunction rain(tick) {\n\n    const w = canvas.offsetWidth;\n    canvas.style.height = w;\n\n    for (let y = 0; y < SIZE; y += (tick % 2) + 1) {\n        for (let x = 0; x < SIZE; x += (tick % 2) + 1) {\n\n            const index = (y) * SIZE + x;\n\n            // Generate rain in the top of the image.\n            const isRain = y < 2;\n\n            // Generate a flooded street in the bottom of the image.\n            const isStreet = y > Math.round(CENTER * 1.53) && y < Math.round(CENTER * 1.57);\n\n            // Mask out the silhouette of an umbrella in the middle of the image.\n            const isUmbrella = Math.random() > 0.8\n                && isInsideCircle(CENTER, CENTER, x, y, 32)\n                && !isInsideCircle(CENTER, CENTER - 10, x - 1, y, 40);\n\n            if (isRain || isStreet || isUmbrella) {\n                levelBufferViewInt8[index] = 0;\n            }\n\n            // Bring it to life.\n            moveDroplet(index);\n        }\n    }\n\n    // Update the canvas with the new pixel values.\n    imageData.data.set(bufferViewInt8);\n    context.putImageData(imageData, 0, 0);\n}\n\nfunction moveDroplet(src) {\n\n    const nextLevel = levelBufferViewInt8[src] + Math.round(Math.random() * 1.3);\n\n    // Generate a 0, 1 or 2.\n    const rand = Math.round(Math.random() * 2.0);\n\n    // Add horizontal movement to create a wind effect.\n    const horizontalMovement = Math.random() > 0.8\n        ? src - rand + Math.floor((mouse.x * 8 - 3))\n        : src;\n\n    // Every 1 in 5 the rain will move up-wards and create the\n    // street splash effect.\n    const verticalMovement = Math.floor(Math.random() * (4 + Math.floor((mouse.y * 4)))) * (Math.random() > 0.2\n        ? 1\n        : -1);\n\n    levelBufferViewInt8[horizontalMovement + (SIZE * verticalMovement)] = nextLevel - (rand & 1);\n\n    const nextColor = COLORS[selectedColorScheme][nextLevel] || 11;\n\n    // Set the new pixel value.\n    bufferViewInt32[src - SIZE] =\n        (255 << 24) |           // Alpha\n        (nextColor[2] << 16) |  // Blue\n        (nextColor[1] << 8) |   // Green\n        nextColor[0];           // Red\n}\n\nfunction render() {\n    rain(tick++);\n\n    // Go again!\n    // setTimeout(function () {\n    requestAnimationFrame(() => render());\n    // }, 1000);\n}\n\n// Go!\nrender();\n\n\nconst Noise = (function () {\n\n    const track = {};\n    const audioContext = new (window.AudioContext || window.webkitAudioContext);\n\n    function createNoise(track) {\n        var lastOut = 0.0;\n        const bufferSize = 2 * audioContext.sampleRate;\n        const noiseBuffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);\n        const output = noiseBuffer.getChannelData(0);\n\n        for (let i = 0; i < bufferSize; i++) {\n            var white = Math.random() * 2 - 1;\n            output[i] = (lastOut + (0.02 * white)) / 1.02;\n            lastOut = output[i];\n            output[i] *= 3.5;\n        }\n\n        track.audioSource.buffer = noiseBuffer;\n    }\n\n    function stopNoise() {\n        if (track.audioSource) {\n            track.audioSource.stop();\n        }\n    }\n\n\n    function buildTrack(track) {\n        track.audioSource = audioContext.createBufferSource();\n        track.gainNode = audioContext.createGain();\n        track.audioSource.connect(track.gainNode);\n        track.gainNode.connect(audioContext.destination);\n    }\n\n    function setGain(track) {\n        track.volume = 0.1;\n        track.gainNode.gain.setValueAtTime(0, audioContext.currentTime);\n        track.gainNode.gain.linearRampToValueAtTime(track.volume / 4, audioContext.currentTime / 2);\n        track.gainNode.gain.linearRampToValueAtTime(track.volume, audioContext.currentTime);\n\n    }\n\n    function playNoise() {\n        stopNoise(track);\n        buildTrack(track);\n        createNoise(track);\n        setGain(track);\n        track.audioSource.loop = true;\n        track.audioSource.start();\n    }\n\n    // Expose functions:\n    return {\n        play: playNoise,\n        stop: stopNoise\n    }\n\n}());\n\n\nlet handleMousemove = (event) => {\n    const {target} = event;\n    mouse.x = target.value / 100;\n};\n\nconst handleRainChange = (event) => {\n    const {target} = event;\n    mouse.y = target.value / 100;\n};\n\nconst handleColorChange = (event) => {\n    const {target} = event;\n    selectedColorScheme = parseInt(target.value);\n    console.log(selectedColorScheme);\n};\n\nconst handleSoundChange = (event) => {\n    const {target} = event;\n    if (target.value === \"1\") {\n        Noise.play();\n    } else {\n        Noise.stop();\n    }\n};\n\n\nconst wind = document.getElementById('wind');\nwind.addEventListener('input', handleMousemove);\n\nconst rainRangeElement = document.getElementById('rain');\nrainRangeElement.addEventListener('input', handleRainChange);\n\n\nconst soundRangeElement = document.getElementById('sound');\nsoundRangeElement.addEventListener('input', handleSoundChange);\n\nconst colorRangeElement = document.getElementById('color');\ncolorRangeElement.addEventListener('input', handleColorChange);\n"]}