{"version":3,"sources":["utils.js","gui.js","sound.js","colors.js","index.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["createNode","n","v","document","createElementNS","p","setAttributeNS","replace","m","o","s","toLowerCase","downloadContent","filename","content","blob","Blob","event","MouseEvent","window","a","createElement","download","href","URL","createObjectURL","dispatchEvent","emptyElement","element","firstChild","removeChild","getParameterByName","name","url","location","regex","RegExp","results","exec","undefined","decodeURIComponent","getQueryStringObject","search","substring","split","map","str","key","value","decodeURI","reduce","prev","curr","Object","assign","getQueryStringObjectFromHash","hash","serializeObject","obj","keys","k","join","controls","id","type","min","max","step","Noise","track","audioContext","AudioContext","webkitAudioContext","createNoise","lastOut","bufferSize","sampleRate","noiseBuffer","createBuffer","output","getChannelData","i","white","Math","random","audioSource","buffer","stopNoise","stop","buildTrack","createBufferSource","gainNode","createGain","connect","destination","setGain","volume","gain","setValueAtTime","currentTime","linearRampToValueAtTime","playNoise","loop","start","play","COLORS","settings","mask","setSettings","options","sound","onload","canvas","context","getContext","width","height","drawImage","getImageData","data","src","setAttributes","attributes","entries","forEach","val","setAttribute","elements","control","label","text","createTextNode","input","innerHTML","appendChild","addEventListener","target","Array","from","querySelectorAll","memo","item","getElementById","params","SIZE","CENTER","tick","imageData","ArrayBuffer","length","bufferViewInt8","Uint8ClampedArray","bufferViewInt32","Uint32Array","levelBuffer","levelBufferViewInt8","isInsideCircle","x1","y1","x2","y2","r","sqrt","rain","w","offsetWidth","style","y","x","index","alpha","odds","moveDroplet","set","putImageData","nextLevel","round","rand","horizontalMovement","floor","parseFloat","horizontalMovementOffset","horizontalMovementMax","verticalMovement","verticalMovementOffset","verticalMovementMax","nextColor","color","render","requestAnimationFrame","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","clear","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","remove","stackTrace","innerText","getParents","modules","parents","d","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"bitfire.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export const createNode = (n, v) => {\n    n = document.createElementNS(\"http://www.w3.org/2000/svg\", n);\n    for (var p in v)\n        n.setAttributeNS(null, p.replace(/[A-Z]/g, function (m, p, o, s) {\n            return \"-\" + m.toLowerCase();\n        }), v[p]);\n    return n\n};\n\nexport const downloadContent = (filename, content) => {\n    const blob = new Blob([content]);\n    const event = new MouseEvent('click', {\n        'view': window,\n        'bubbles': true,\n        'cancelable': true\n    });\n    const a = document.createElement(\"a\");\n    a.download = filename;\n    a.href = URL.createObjectURL(blob);\n    a.dispatchEvent(event);\n};\n\nexport const emptyElement = element => {\n    while (element.firstChild) {\n        element.removeChild(element.firstChild);\n    }\n    return element;\n};\n\nexport const getParameterByName = (name, url) => {\n    if (!url) {\n        url = window.location.href;\n    }\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return undefined;\n    if (!results[2]) return \"\";\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n};\n\nexport const getQueryStringObject = () => {\n    return window.location.search.substring(1).split('&')\n        .map(str => {\n            let [key, value] = str.split('=');\n            return {[key]: decodeURI(value)};\n        })\n        .reduce((prev, curr) => Object.assign(prev, curr));\n};\n\nexport const getQueryStringObjectFromHash = () => {\n    return window.location.hash.substring(1).split('&')\n        .map(str => {\n            let [key, value] = str.split('=');\n            return {[key]: decodeURI(value)};\n        })\n        .reduce((prev, curr) => Object.assign(prev, curr));\n};\n\n\nexport const serializeObject = obj => `#${Object.keys(obj).map(k=>`${k}=${obj[k]}`).join('&')}`;\n","export const controls = [{\n    id: 'mask',\n    type: 'range',\n    min: 0,\n    max: 3,\n    step: 1,\n    value: 0\n}, {\n    id: 'horizontalMovementOffset',\n    type: 'range',\n    min: -2,\n    max: 2,\n    step: 0.1,\n    value: 0\n}, {\n    id: 'horizontalMovementMax',\n    type: 'range',\n    min: 0,\n    max: 10,\n    step: 1,\n    value: 1\n}, {\n    id: 'verticalMovementOffset',\n    type: 'range',\n    min: -100,\n    max: 100,\n    step: 1,\n    value: -1\n}, {\n    id: 'verticalMovementMax',\n    type: 'range',\n    min: -100,\n    max: 100,\n    step: 1,\n    value: 5\n}, {\n    id: 'sound',\n    type: 'range',\n    min: 0,\n    max: 1,\n    step: 1,\n    value: 0\n}, {\n    id: 'color',\n    type: 'range',\n    min: 0,\n    max: 2,\n    step: 1,\n    value: 0\n}];","export const Noise = (function () {\n\n    const track = {};\n    const audioContext = new (window.AudioContext || window.webkitAudioContext);\n\n    function createNoise(track) {\n        var lastOut = 0.0;\n        const bufferSize = 2 * audioContext.sampleRate;\n        const noiseBuffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);\n        const output = noiseBuffer.getChannelData(0);\n\n        for (let i = 0; i < bufferSize; i++) {\n            var white = Math.random() * 2 - 1;\n            output[i] = (lastOut + (0.02 * white)) / 1.02;\n            lastOut = output[i];\n            output[i] *= 3.5;\n        }\n\n        track.audioSource.buffer = noiseBuffer;\n    }\n\n    function stopNoise() {\n        if (track.audioSource) {\n            track.audioSource.stop();\n        }\n    }\n\n\n    function buildTrack(track) {\n        track.audioSource = audioContext.createBufferSource();\n        track.gainNode = audioContext.createGain();\n        track.audioSource.connect(track.gainNode);\n        track.gainNode.connect(audioContext.destination);\n    }\n\n    function setGain(track) {\n        track.volume = 0.1;\n        track.gainNode.gain.setValueAtTime(0, audioContext.currentTime);\n        track.gainNode.gain.linearRampToValueAtTime(track.volume / 4, audioContext.currentTime / 2);\n        track.gainNode.gain.linearRampToValueAtTime(track.volume, audioContext.currentTime);\n\n    }\n\n    function playNoise() {\n        stopNoise(track);\n        buildTrack(track);\n        createNoise(track);\n        setGain(track);\n        track.audioSource.loop = true;\n        track.audioSource.start();\n    }\n\n    // Expose functions:\n    return {\n        play: playNoise,\n        stop: stopNoise\n    }\n\n}());","// A gray-scale height-map.\nexport const COLORS = [[\n    [255, 255, 255],\n    [240, 240, 240],\n    [217, 217, 217],\n    [189, 189, 189],\n    [150, 150, 150],\n    [115, 115, 115],\n    [82, 82, 82],\n    [37, 37, 37],\n    [0, 0, 0]\n], [\n    [255, 255, 204],\n    [255, 237, 160],\n    [254, 217, 118],\n    [254, 178, 76],\n    [253, 141, 60],\n    [252, 78, 42],\n    [227, 26, 28],\n    [189, 0, 38],\n    [128, 0, 38]\n], [\n    [255, 247, 251],\n    [236, 231, 242],\n    [208, 209, 230],\n    [166, 189, 219],\n    [116, 169, 207],\n    [54, 144, 192],\n    [5, 112, 176],\n    [4, 90, 141],\n    [2, 56, 88]\n]];","import {getQueryStringObjectFromHash, serializeObject} from './utils.js';\n\n\nimport {controls} from \"./gui.js\";\nimport {Noise} from './sound';\nimport {COLORS} from \"./colors\";\n\nlet settings = {\n    mask: []\n};\n\nconst setSettings = options => {\n    if (options.sound !== settings.sound) {\n        if (settings.sound === \"1\") {\n            Noise.play();\n        } else {\n            Noise.stop();\n        }\n    }\n\n    if (settings.mask !== options.mask) {\n        const mask = document.createElement('img');\n        mask.onload = function () {\n\n            var canvas = document.createElement('canvas');\n            var context = canvas.getContext('2d');\n            canvas.width = mask.width;\n            canvas.height = mask.height;\n            context.drawImage(mask, 0, 0);\n            settings.mask = context.getImageData(0, 0, mask.width, mask.height).data;\n\n        };\n        mask.src = `masks/${options.mask}.gif`;\n\n    }\n\n    settings = Object.assign(settings, options);\n};\n\nconst setAttributes = (element, attributes) => Object.entries(attributes)\n    .forEach(([key, val]) =>\n        element.setAttribute(key, val));\n\nconst elements = controls.map(control => {\n    const label = document.createElement('label');\n    const text = document.createTextNode(control.id);\n    const input = document.createElement('input');\n\n    setAttributes(input, control);\n\n    const val = document.createElement('span');\n    val.innerHTML = ` (${control.value})`;\n\n    label.appendChild(text);\n    label.appendChild(val);\n    label.appendChild(input);\n\n    input.addEventListener('change', event => {\n        val.innerHTML = ` (${event.target.value})`;\n        const options = Array.from(document.querySelectorAll('input'))\n            .map(({id, value}) => ({[id]: value}))\n            .reduce((memo, item) => Object.assign(memo, item), {});\n        location.hash = serializeObject(options);\n    });\n\n    return label;\n});\n\nconst target = document.getElementById('controls');\nelements.forEach(element => target.appendChild(element));\n\n// const search = window.location.search;\nconst params = getQueryStringObjectFromHash();\nObject.keys(params).forEach(key => {\n    const input = document.getElementById(key);\n    if (input) {\n        input.value = params[key];\n    }\n});\n\nwindow.addEventListener(\"hashchange\", event => {\n    const options = getQueryStringObjectFromHash();\n    setSettings(options);\n    Object.keys(options).forEach(key => {\n        const input = document.getElementById(key);\n        if (input) {\n            input.value = options[key];\n        }\n    });\n});\n\nconst options = Array.from(document.querySelectorAll('input'))\n    .map(({id, value}) => ({[id]: value}))\n    .reduce((memo, item) => Object.assign(memo, item), {});\n\nsetSettings(options);\n\n\nconst SIZE = 256;\nconst CENTER = SIZE / 2;\n\nlet tick = 0;\n\n\n// Setup the canvas.\nconst canvas = document.getElementById('canvas');\nconst context = canvas.getContext('2d');\n\ncanvas.width = SIZE;\ncanvas.height = SIZE;\n\nconst imageData = context.getImageData(0, 0, SIZE, SIZE);\n\n// One buffer to hold the color data for each pixel.\nconst buffer = new ArrayBuffer(imageData.data.length);\nconst bufferViewInt8 = new Uint8ClampedArray(buffer);\nconst bufferViewInt32 = new Uint32Array(buffer);\n\n// One buffer to hold the height map level for each pixel.\nconst levelBuffer = new ArrayBuffer(imageData.data.length);\nconst levelBufferViewInt8 = new Uint8ClampedArray(levelBuffer);\n\n// Check if a coordinate is inside a circle with center x1, y1 and radius r.\nfunction isInsideCircle(x1, y1, x2, y2, r) {\n    return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2)) < r\n}\n\nfunction rain() {\n\n    const w = canvas.offsetWidth;\n    canvas.style.height = w;\n\n    for (let y = 0; y < SIZE; y += 1) {\n        for (let x = 0; x < SIZE; x += 1) {\n\n            const index = (y) * SIZE + x;\n\n            const alpha = settings.mask[index * 4] || 0;\n            // console.log(index*4 + 3);\n            // console.log(alpha);\n\n            // Generate rain in the top of the image.\n            // const isRain = y < 2;\n\n            // Generate a flooded street in the bottom of the image.\n            // const isStreet = y > Math.round(CENTER * 1.53) && y < Math.round(CENTER * 1.57);\n\n            // Mask out the silhouette of an umbrella in the middle of the image.\n            // const isUmbrella = Math.random() > 0.8\n            //     && isInsideCircle(CENTER, CENTER, x, y, 32)\n            //     && !isInsideCircle(CENTER, CENTER - 10, x - 1, y, 40);\n\n            const odds = 1 / 255 * (255 - alpha);\n            if (alpha && Math.random() > odds) {\n                levelBufferViewInt8[index] = 0;\n            }\n\n            // Bring it to life.\n            moveDroplet(index);\n        }\n    }\n\n    // Update the canvas with the new pixel values.\n    imageData.data.set(bufferViewInt8);\n    context.putImageData(imageData, 0, 0);\n}\n\nfunction moveDroplet(src) {\n\n    const nextLevel = levelBufferViewInt8[src] + Math.round(Math.random() * 1.3);\n\n    // Generate a 0, 1 or 2.\n    const rand = Math.round(Math.random() * 2.0);\n\n    // Add horizontal movement to create a wind effect.\n    // const horizontalMovement = Math.random() > 0.8\n    //     ? src - rand + Math.floor((settings.wind * 8 - 3))\n    //     : src;\n    const horizontalMovement = src + Math.floor(parseFloat(settings.horizontalMovementOffset) + Math.random() * parseFloat(settings.horizontalMovementMax));\n\n\n    // Every 1 in 5 the rain will move up-wards and create the\n    // street splash effect.\n    const verticalMovement = Math.floor(parseFloat(settings.verticalMovementOffset) + Math.random() * parseFloat(settings.verticalMovementMax));\n\n    levelBufferViewInt8[horizontalMovement + (SIZE * verticalMovement)] = nextLevel - (rand & 1);\n\n    const nextColor = COLORS[settings.color][nextLevel] || 11;\n\n    // Set the new pixel value.\n    bufferViewInt32[src - SIZE] =\n        (255 << 24) |           // Alpha\n        (nextColor[2] << 16) |  // Blue\n        (nextColor[1] << 8) |   // Green\n        nextColor[0];           // Red\n}\n\nfunction render() {\n    rain();\n\n    // Go again!\n    // setTimeout(function () {\n    requestAnimationFrame(() => render());\n    // }, 100);\n}\n\n// Go!\nconst mask = document.createElement('img');\nmask.onload = function () {\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    canvas.width = mask.width;\n    canvas.height = mask.height;\n    context.drawImage(mask, 0, 0);\n    settings.mask = context.getImageData(0, 0, mask.width, mask.height).data;\n\n};\nmask.src = 'masks/0.gif';\n\nrender();\n\n\n// const wind = document.getElementById('wind');\n// wind.addEventListener('input', handleMousemove);\n\n// const rainRangeElement = document.getElementById('rain');\n// rainRangeElement.addEventListener('input', handleRainChange);\n\n\n// const soundRangeElement = document.getElementById('sound');\n// soundRangeElement.addEventListener('input', handleSoundChange);\n\n// const colorRangeElement = document.getElementById('color');\n// colorRangeElement.addEventListener('input', handleColorChange);\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}